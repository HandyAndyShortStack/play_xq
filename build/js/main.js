// Generated by CoffeeScript 1.9.0
(function() {
  var Game, getCode, placement;

  window.Game = Game = require('chinese_chess');

  window.game = new Game;

  window.drawBoard = function() {
    var board, location, piece, _ref, _results;
    $('.test-board').html('');
    board = new XiangqiViewer.Board('.test-board', 55, 2.5, false);
    _ref = game.position;
    _results = [];
    for (location in _ref) {
      piece = _ref[location];
      _results.push(board.place([placement(location, piece)]));
    }
    return _results;
  };

  getCode = function(piece) {
    if (piece.type === 'Chariot') {
      return 'r';
    }
    if (piece.type === 'Horse') {
      return 'h';
    }
    if (piece.type === 'Elephant') {
      return 'e';
    }
    if (piece.type === 'Advisor') {
      return 'a';
    }
    if (piece.type === 'General') {
      return 'k';
    }
    if (piece.type === 'Soldier') {
      return 'p';
    }
    if (piece.type === 'Cannon') {
      return 'c';
    }
  };

  placement = function(location, piece) {
    return {
      code: getCode(piece),
      red: piece.color === 'red',
      file: location[0],
      rank: 9 - location[2]
    };
  };

  $(function() {
    return drawBoard();
  });

}).call(this);
